<div class="card block">
    <header class="card-header">
        <p class="card-header-title">
            Zobrazeno
            <span class="has-text-warning-dark ml-2 mr-2">
                {{ offset }} – {{ [offset+limit, count] | min }}
            </span>
            z celkových
            <span class="has-text-warning-dark ml-2 mr-2">
                {{ count }}
            </span>
            značek
        </p>
        <a class="button is-small is-align-self-center mr-2"
           hx-get="{{ url_for('core.index') }}?pois_offset={{ offset-limit }}"
           hx-target="#stats"
           hx-swap="outerHTML"
           {% if offset <= 0 %}disabled hx-disable{% endif %}>
            <span class="icon">
                <i class="fa fa-chevron-left"></i>
            </span>
        </a>
        <a class="button is-small is-align-self-center"
           hx-get="{{ url_for('core.index') }}?pois_offset={{ offset+limit }}"
           hx-target="#stats"
           hx-swap="outerHTML"
           {% if offset + limit >= count %}disabled hx-disable{% endif %}>
            <span class="icon">
                <i class="fa fa-chevron-right"></i>
            </span>
        </a>
        <button class="card-header-icon"
                _="on click toggle .is-hidden on #filters">
            <span class="icon">
                <i class="fa fa-plus" aria-hidden="true"></i>
            </span>
        </button>
    </header>
    <div class="card-content is-hidden" id="filters">
    </div>
</div>

<table class="table stats-table">
    <thead>
        <tr>
            {% import "stats/_table-head.html" as head %}
            {% for field, name in (('id', 'ID'),
                                   ('created', 'Vytvořeno'),
                                   ('category_name', 'Druh'),
                                   ('display_count', '# Zobrazení'),
                                   (None, 'Šířka; Délka'),
                                   ('creator_id', 'Uživatel'),
                                   ('n_images', '# Fotek'),
                                   ('n_comments', '# Komentářů')) %}
                {{ head.th('pois', field, name, order, next_order(field, order)) }}
            {% endfor %}
        </tr>
    </thead>
    <tbody>
    {% for row in rows %}
        <tr>
            <th class="cell-number">{{ row.id }}</th>
            <td class="cell-w-datetime cell-number">{{ row.created }}</td>
            <td class="cell-w-name">{{ row.category_name }}</td>
            <td class="cell-number">{{ row.display_count|default('0', true) }}</td>
            <td class="cell-w-latlng cell-number">
                {{ row.lat|default('-', true) }}; {{ row.lng|default('-', true) }}
            </td>
            <td class="cell-number">{{ row.creator_id|default('-', true) }}</td>
            <td class="cell-number">{{ row.n_images }}</td>
            <td class="cell-number">{{ row.n_comments }}</td>
        </tr>
    {% endfor %}
    </tbody>
</table>
